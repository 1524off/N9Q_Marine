<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>集結時間計算機（1524）</title>
<style>
:root {
  --navy: #1565C0;
  --bg: #f7f9ff;
  --line: #d1d5db;
  --text: #1f2937;
}
body {
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
}
header {
  text-align: center;
  padding: 10px;
  font-weight: 600;
  font-size: 18px;
}
.clock {
  font-size: 1.4rem;
  font-weight: 600;
  letter-spacing: 0.5px;
}
.clock span {
  font-size: 0.9rem;
  color: #6b7280;
  margin-left: 4px;
}

main {
  max-width: 600px;
  margin: 0 auto;
  padding: 10px;
}
section {
  background: #fff;
  border: 1px solid var(--line);
  border-radius: 10px;
  padding: 10px 14px;
  margin-bottom: 10px;
}

label {
  font-size: 14px;
  font-weight: 500;
  color: #374151;
}

/* ボタン */
button {
  border: none;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 600;
  padding: 10px;
  width: 100%;
  transition: 0.2s;
}
button#calcBtn {
  background: var(--navy);
  color: #fff;
  margin-top: 10px;
}
button#calcBtn:hover { background: #0b4aa8; }

button.small {
  width: auto;
  padding: 6px 12px;
  font-size: 18px;
  margin: 4px;
}
button#addBtn { background: #e5e7eb; }
button#removeBtn { background: #fee2e2; color: #b91c1c; }

/* テーブル */
table {
  width: 100%;
  border-collapse: collapse;
  text-align: center;
  font-size: 14px;
}
th, td {
  border: 1px solid var(--line);
  padding: 6px;
}
th {
  background: #f0f4ff;
  font-weight: 600;
  color: var(--navy);
}

.pet-on { background: #eaf3ff; }

/* ペット残り列非表示 */
.hide-pet td:last-child, .hide-pet th:last-child {
  display: none;
}

/* 共通着弾 */
#impactDisplay {
  text-align: center;
  font-size: 18px;
  font-weight: 600;
  color: var(--navy);
  margin-top: 6px;
}
</style>
</head>
<body>

<header>
  現在時刻　<span class="clock" id="utcClock">--:--:--</span><span> UTC</span>
</header>

<main>
  <!-- モード選択 -->
  <section>
    <label>モード選択</label><br>
    <select id="mode" style="width:100%;padding:6px;">
      <option value="normal">被せ集結モード</option>
      <option value="reverse">着時間指定モード</option>
    </select>
    <div id="impactSelectBox" style="margin-top:6px;display:none;">
      <label>共通着弾時刻（UTC）</label>
      <select id="impactTime" style="width:100%;padding:6px;"></select>
    </div>
  </section>

  <!-- 設定 -->
  <section>
    <div style="display:flex;flex-wrap:wrap;gap:10px;">
      <div style="flex:1;">
        <label>準備時間（秒）</label>
        <select id="prep" style="width:100%;padding:6px;">
          <option>30</option><option>60</option><option>90</option><option>120</option>
        </select>
      </div>
      <div style="flex:1;">
        <label>集結時間（分）</label>
        <select id="rally" style="width:100%;padding:6px;">
          <option>5</option><option>10</option><option>15</option>
        </select>
      </div>
    </div>
    <button id="calcBtn">集結がきた！</button>
    <div style="display:flex;align-items:center;justify-content:space-between;margin-top:6px;">
      <div>
        <button id="addBtn" class="small">＋</button>
        <button id="removeBtn" class="small">−</button>
      </div>
      <label><input type="checkbox" id="showPet" checked> ペット表示</label>
    </div>
  </section>

  <!-- テーブル -->
  <section>
    <table id="tbl">
      <thead>
        <tr><th>✅</th><th>集結主</th><th>行軍</th><th>出発UTC</th><th>🐶</th></tr>
      </thead>
      <tbody id="tbody">
        <tr>
          <td><input type="checkbox" class="pet"></td>
          <td><input type="text" value="Marine" style="width:100%;border:none;text-align:center;"></td>
          <td><select class="march" style="width:100%;padding:4px;"></select></td>
          <td>-</td>
          <td class="pet-time">🐶 1:59:59</td>
        </tr>
      </tbody>
    </table>
  </section>

  <div id="impactDisplay">着弾時刻　--:--:-- UTC</div>
</main>

<script>
/* 時計 */
function pad(n){return String(n).padStart(2,"0");}
function fmtUTC(d){return `${pad(d.getUTCHours())}:${pad(d.getUTCMinutes())}:${pad(d.getUTCSeconds())}`;}
function tickClock(){document.getElementById("utcClock").textContent=fmtUTC(new Date());}
setInterval(tickClock,1000);tickClock();

/* 行軍リスト生成 (34〜180秒) */
document.querySelectorAll(".march").forEach(sel=>{
  for(let s=34;s<=180;s++){
    const m=Math.floor(s/60),sec=s%60;
    const opt=document.createElement("option");
    opt.value=s;
    opt.textContent=`${m>0?m+"分":""}${sec}秒`;
    sel.appendChild(opt);
  }
});

/* 着指定プルダウン (1分刻み) */
const impactSelect=document.getElementById("impactTime");
for(let h=0;h<24;h++){
  for(let m=0;m<60;m++){
    const opt=document.createElement("option");
    opt.value=`${pad(h)}:${pad(m)}`;
    opt.textContent=`${pad(h)}:${pad(m)}`;
    impactSelect.appendChild(opt);
  }
}

/* モード切替 */
document.getElementById("mode").addEventListener("change",()=>{
  const isReverse=document.getElementById("mode").value==="reverse";
  document.getElementById("impactSelectBox").style.display=isReverse?"block":"none";
});

/* ペット表示ON/OFF */
document.getElementById("showPet").addEventListener("change",e=>{
  document.getElementById("tbl").classList.toggle("hide-pet",!e.target.checked);
});

/* 追加・削除 */
document.getElementById("addBtn").addEventListener("click",()=>{
  const tr=document.createElement("tr");
  tr.innerHTML=`<td><input type="checkbox" class="pet"></td>
  <td><input type="text" value="" style="width:100%;border:none;text-align:center;"></td>
  <td><select class="march" style="width:100%;padding:4px;"></select></td>
  <td>-</td><td class="pet-time">🐶 1:59:59</td>`;
  document.getElementById("tbody").appendChild(tr);
  const sel=tr.querySelector(".march");
  for(let s=34;s<=180;s++){
    const m=Math.floor(s/60),sec=s%60;
    const opt=document.createElement("option");
    opt.value=s;
    opt.textContent=`${m>0?m+"分":""}${sec}秒`;
    sel.appendChild(opt);
  }
});

/* 削除 */
document.getElementById("removeBtn").addEventListener("click",()=>{
  const rows=document.querySelectorAll("#tbody tr");
  if(rows.length>1) rows[rows.length-1].remove();
});

/* 集結がきた！（仮動作）*/
document.getElementById("calcBtn").addEventListener("click",()=>{
  document.getElementById("impactDisplay").textContent="着弾時刻　12:10:20 UTC";
});
</script>
</body>
</html>